# Malware URL Detection API - Environment Configuration
# Copy this file to .env and update values as needed
# All values have sensible defaults and are optional unless marked REQUIRED

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# REQUIRED: Path to local malware database files (CSV/JSON)
# Multiple files can be specified as JSON array
# Example: ["data/urls.csv","data/threats.json"]
MALWARE_DB_FILES=["data/malware_lists/sample_malware.csv"]

# OPTIONAL: HTTP endpoints for remote malware databases
# Multiple URLs can be specified as JSON array (use [] for empty list)
# Example: ["https://api.example.com/check","https://other.com/lookup"]
MALWARE_DB_HTTP_URLS=[]

# ============================================================================
# CACHE CONFIGURATION
# ============================================================================

# Enable/disable in-memory caching (default: true)
# Caching dramatically improves performance for repeated URL checks
CACHE_ENABLED=true

# Time-to-live for cache entries in seconds (default: 3600)
# Longer TTL = better hit rate but potentially stale data
# Set to 0 to disable TTL (cache entries never expire)
CACHE_TTL_SECONDS=3600

# Maximum number of URLs to keep in cache (default: 10000)
# When cache is full, least-recently-used entries are evicted
# Larger cache = better hit rate but more memory usage
# Estimate: ~500 bytes per cached entry
CACHE_MAX_ENTRIES=10000

# ============================================================================
# API CONFIGURATION
# ============================================================================

# Bind address for FastAPI server (default: 0.0.0.0)
# Use 127.0.0.1 for localhost only
API_HOST=0.0.0.0

# Listen port (default: 8000)
API_PORT=8000

# Log level (default: INFO)
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
# DEBUG: Very verbose, includes all request/response details
# INFO: Normal operation, includes request summaries
# WARNING: Only warnings and errors
API_LOG_LEVEL=INFO

# ============================================================================
# PERFORMANCE CONFIGURATION
# ============================================================================

# Timeout for individual database queries in seconds (default: 5.0)
# If a loader doesn't respond within this time, it's considered unavailable
# but service continues with other loaders
# Set lower for faster failures, higher for slow databases
DB_QUERY_TIMEOUT_SECONDS=5.0

# Connection pool size for HTTP loaders (default: 100)
# Number of simultaneous connections to keep open
# Increase for high concurrency, decrease to limit resource usage
CONNECTION_POOL_SIZE=100

# API-level timeout for full request handling (seconds)
# If the entire request (including DB queries) takes longer than this,
# the API will return a 503 Service Unavailable response.
API_REQUEST_TIMEOUT_SECONDS=10.0

# ============================================================================
# CORS CONFIGURATION
# ============================================================================

# Enable CORS for cross-origin requests (default: false)
ENABLE_CORS=false

# Comma-separated list of allowed origins for CORS
# Example: ["http://localhost:3000","https://example.com","https://app.example.com"]
# Use * to allow any origin (not recommended for production)
CORS_ORIGINS=["http://localhost:3000"]

# ============================================================================
# DEPLOYMENT NOTES
# ============================================================================

# Production Recommendations:
# - API_LOG_LEVEL=WARNING (reduce verbose logging)
# - CACHE_TTL_SECONDS=7200 (longer cache for stability)
# - DB_QUERY_TIMEOUT_SECONDS=3 (fail fast on slow databases)
# - CONNECTION_POOL_SIZE=200 (handle more concurrent users)
#
# Development Recommendations:
# - API_LOG_LEVEL=DEBUG (see all details)
# - CACHE_TTL_SECONDS=300 (shorter for testing cache behavior)
# - DB_QUERY_TIMEOUT_SECONDS=10 (more lenient for debugging)
#
# Docker/Kubernetes:
# - API_HOST=0.0.0.0 (accept all interfaces)
# - API_PORT=8000 (standard)
# - Use ConfigMap for environment variables
# - Use Secrets for sensitive data (API keys, database credentials)
